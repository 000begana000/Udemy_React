// Working with Asynchronous form actions 
- before we clear the form, we submit the data to the backend, using context 

// Updating the UI with useFormStatus();
- this hook can't be used in the component in the component that contains the form and the formAction, but instead it must be used in some nested component. some component, inside of form.

- create new component file 
ex) Submit.jsx 

import { useFormStatus } from "react-dom";

- original 
    // const {pending, data, method, action} = useFormStatus();

- we use only pending, returns boolean - submitted or not
    const { pending } = useFormStatus();

- use it conditionally 
    return (
        <p className="actions">
        <button type="submit" disabled={pending}>
            {pending ? "Submitting..." : "Submit"}
        </button>
        </p>
    );


// Registering multiple form actions 
- we can use action prop outside of form tag, in the button tap like this :
    <button formAction={upvoteAction}>

- create functions : there is no input threrfor we don't receive formData
  function upvoteAction() {
    console.log("upvote");
  }

  function downvoteAction() {
    console.log("downvote");
  }


// Sending an HTTP request via a form action 

- create upvote promise function (async/await) - be aware of id 

    async function upvoteOpinion(id) {
        const response = await fetch(
        "http://localhost:3000/opinions/" + id + "/upvote", <=====
        {
            method: "POST",
        }
        );

        if (!response.ok) {
        return;
        }

        setOpinions(prevOpinions => {
        return prevOpinions.map(opinion => {
            if (opinion.id === id) {
            return { ...opinion, votes: opinion.votes + 1 };
            }
            return opinion;
        });
        });
    }
    

- import context and import functions via use() hook

useContext() — React Hook
Purpose:
To consume a context that was created using React.createContext.

use() — Experimental Hook (as of React 18+) : async resource!!
Purpose:
To suspend rendering until an async resource (like a Promise) is resolved. Often used in Server Components or with async functions in React.

    import { use } from "react";
    import { OpinionsContext } from "../store/opinions-context";


- call the functions
: these functions yield promises so we need to create async await actions

    async function upvoteAction() {
        await upvoteOpinion(id); // comes from props
    }

    async function downvoteAction() {
        await downvoteOpinion(id);
    }